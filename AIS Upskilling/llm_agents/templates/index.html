function addToConversation(agentNum, message) {
    const conversation = document.getElementById(`conversation${agentNum}`);
    const entry = document.createElement('div');
    
    if (message.type === "user") {
        entry.className = 'bg-blue-50 p-3 rounded-lg';
        entry.innerHTML = `<div class="font-medium text-blue-600">You:</div>
                         <div>${message.content}</div>`;
    } else if (message.type === "success") {
        if (message.content.thought) {
            entry.className = 'bg-green-50 p-3 rounded-lg';
            entry.innerHTML = `<div class="font-medium text-green-600">Agent:</div>
                             ${message.content.thought ? 
                               `<div class="mb-2">${message.content.thought}</div>` : ''}
                             <div class="text-gray-600 ${message.content.thought ? 'border-t pt-2' : ''}">${message.content.result}</div>`;
        } else {
            // This is a system message (received from another agent)
            entry.className = 'bg-purple-50 p-3 rounded-lg';
            entry.innerHTML = `<div class="font-medium text-purple-600">Message Received:</div>
                             <div>${message.content.result}</div>`;
        }
    } else {
        entry.className = 'bg-red-50 p-3 rounded-lg';
        entry.innerHTML = `<div class="font-medium text-red-600">Error:</div>
                         <div>${message.content}</div>`;
    }
    
    conversation.insertBefore(entry, conversation.firstChild);
} 